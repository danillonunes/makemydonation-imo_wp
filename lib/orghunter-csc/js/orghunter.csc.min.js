!function(e){var n={jquery:{js:["lib/jquery/jquery.min.js"],exists:function(){return"undefined"!=typeof jQuery}},chosen:{css:["lib/chosen/chosen.min.css"],js:["lib/chosen/chosen.jquery.min.js"],exists:function(){return void 0!==jQuery.fn.chosen}},typeahead:{js:["lib/typeahead.js/typeahead.bundle.min.js"],exists:function(){return void 0!==jQuery.fn.typeahead}},csc:{css:["css/orghunter.csc.min.css"],exists:function(){return void 0!==jQuery.fn.orghunterCSC}}},M={apiURL:"",searchURL:"{apiURL}/charitysearch?state={state}&city={city}&searchTerm={term}",searchAliasURL:"{apiURL}/charitysearchalias?state={state}&city={city}&searchTerm={term}",citiesURL:"{apiURL}/cities/{state}",searchAlias:!1,apiData:{},size:"medium",onReady:null,onCharitySelect:null},T=Object.assign({"":"- All States -"},{AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District of Columbia",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"},{"-":"--------------------"},{AS:"American Samoa",GU:"Guam",MP:"Northern Mariana Islands",PR:"Puerto Rico",VI:"U.S. Virgin Islands"}),a=null,t=function(){if(a)return a;for(var e=document.getElementsByTagName("script"),t=/js\/orghunter\.csc(\.min)?\.js(.*)?/,n=0;n<e.length;n++)if(e[n].src.match(t))return a=e[n].src.replace(t,"");"undefined"!=typeof console&&void 0!==console.warn&&console.warn("Could not determine orghunter.csc.js path.")},r=function(e){if(!e.exists()){if(void 0!==e.css)for(i in e.css)c(t()+e.css[i]);if(void 0!==e.js)for(i in e.js)o(t()+e.js[i])}},c=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},o=function(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,document.getElementsByTagName("head")[0].appendChild(t)},d=function(e,t,n){n=void 0!==n?n:10,t()?e():n<3e4&&window.setTimeout(function(){d(e,t,2*n)},n)},x=function(){return"ohcsc-"+(""+Math.random()).replace(/\D/g,"")};jQueryFn=function(a){var r=jQuery;a=r.extend({},M,a);var e=x(),t=x(),n=x(),i=x(),c=x(),o=x(),d=x(),u=r.extend({},a.apiData),l=a.searchAlias?a.searchAliasURL:a.searchURL,h=function(e,n){return e.replace(/{([a-zA-Z0-9]+)}/g,function(e,t){return n[t]||""})},f={},g="",y="",p="";searchStateName=function(){if(g)return T[g]};var m=this,v=r('<select id="ohcsc-state" class="ohcsc-state ohcsc-s ohcsc-f"></select>'),b=r('<input id="ohcsc-city" type="text" class="ohcsc-city ohcsc-tf ohcsc-f"/>'),C=r('<input id="ohcsc-term" type="text" class="ohcsc-term ohcsc-tf ohcsc-f"/>'),j=r('<div id="ohcsc-w" class="ohcsc-w ohcsc-w-'+{small:"sm",medium:"md",large:"lg"}[a.size]+'"></div>').appendTo(m),w=r('<div id="ohcsc-state-w" class="ohcsc-f-w"></div>').append(v),N=r('<div id="ohcsc-city-w" class="ohcsc-f-w"></div>').append(b),S=r('<div id="ohcsc-term-w" class="ohcsc-f-w"></div>').append(C),A=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:h(l,{}),prepare:function(e,t){var n={state:g,city:y,term:p},i=r.extend({},a,n,{term:encodeURIComponent(e)});return t.url=h(l,i),t.data=u,t},transform:function(e){return e.data}}});return m.bind(e,function(){v.trigger(i),b.trigger(i),C.trigger(i),m.trigger(n)}).bind(t,function(){v.trigger(c),b.trigger(c),C.trigger(c)}).bind(n,function(){v.trigger(o),b.trigger(o),C.trigger(o)}).bind("ohcsc-reset",function(e,t){t.keepState||v.trigger(c),t.keepCity||b.trigger(c),t.keepTerm||C.trigger(c)}),v.bind(i,function(){j.append(w),r.each(T,function(e,t){v.append('<option value="'+e+'">'+t+"</option>")}),a.defaultState&&T[a.defaultState]&&v.trigger(d,[a.defaultState]),"object"==typeof wp&&"oldEditor"in wp||v.chosen(),v.trigger("change")}).bind(d,function(e,t){v.val(t).trigger("change")}).bind(o,function(){w.removeClass("selected"),g&&w.addClass("selected")}).bind("change",function(){g=v.val()}).bind("change",function(){g&&window.setTimeout(function(){b.trigger("focus")},10)}).bind("change",function(){m.trigger(t),m.trigger(n)}).bind("change",function(){"-"==v.val()&&v.trigger(d,[""])}),b.bind("change",function(){y=b.val()}).bind("change",function(){m.trigger(n)}).bind("change",function(){y&&C.trigger("focus")}).bind(i,function(){j.append(N),a.defaultCity&&b.trigger(d,[a.defaultCity])}).bind(c,function(){b.typeahead("val","").val("").trigger("change")}).bind(d,function(e,t){b.val(t).trigger("change")}).bind(o,function(){N.removeClass("selected"),y&&N.addClass("selected")}).bind(o,function(){g?b.removeAttr("disabled"):b.attr("disabled","disabled")}).bind(o,function(){var e="Select a state to filter by city";g&&(e="All "+searchStateName()+" cities"),b.attr("placeholder",e)}).bind(o,function(){g&&void 0===f[g]&&(b.typeahead("destroy"),function(t,n){if(void 0===f[t]){var e=r.extend({},a,{state:t}),i=h(a.citiesURL,e);r.getJSON(i,u,function(e){f[t]=new Bloodhound({datumTokenizer:function(e){return[e]},queryTokenizer:function(e){return[e]},local:e}),n()})}else n()}(g,function(e){var t=b.is(":focus");m.trigger(n),t&&b.trigger("focus")}))}).bind(o,function(){g&&void 0!==f[g]?b.is(".tt-input")||b.typeahead({hint:!0},{name:"cities",source:f[g],limit:1}):b.typeahead("destroy")}).bind("typeahead:autocomplete typeahead:select",function(){b.trigger("change")}),C.bind("change",function(){p=C.val()}).bind(i,function(){j.append(S),C.val("")}).bind(c,function(){C.typeahead("val","").val("").trigger("change")}).bind(o,function(){var e="US";g&&(e=searchStateName(),y&&(e=y+", "+g)),C.attr("placeholder","Search all "+e+" charities")}).typeahead(null,{display:function(e){return e.charityName},templates:{suggestion:function(e){return s="<div><strong>"+e.charityName+"</strong><br/><small>"+e.city+", "+e.state+"</small></div>",s}},source:A}).bind("typeahead:asyncrequest",function(){S.addClass("load")}).bind("typeahead:asynccancel typeahead:asyncreceive",function(){S.removeClass("load")}).bind("typeahead:select",function(e,t){var n=[t.ein,t];"function"==typeof a.onCharitySelect&&a.onCharitySelect.apply(this,n)}),m.trigger(e),"function"==typeof a.onReady&&a.onReady(),this},e.orghunterCSC=function(e,t){d(function(){jQuery(e).orghunterCSC(t)},function(){return n.jquery.exists()&&n.csc.exists()})};r(n.jquery),d(function(){r(n.chosen),r(n.typeahead),r(n.csc),d(function(){jQuery.fn.orghunterCSC=jQueryFn},function(){return n.jquery.exists()&&n.chosen.exists()&&n.typeahead.exists()})},function(){return n.jquery.exists()})}(window);
//# sourceMappingURL=orghunter.csc.min.js.map
