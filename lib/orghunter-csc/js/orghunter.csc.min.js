!function(e){var n={jquery:{js:["lib/jquery/jquery.min.js"],exists:function(){return"undefined"!=typeof jQuery}},chosen:{css:["lib/chosen/chosen.min.css"],js:["lib/chosen/chosen.jquery.min.js"],exists:function(){return n.jquery.exists()&&void 0!==jQuery.fn.chosen}},typeahead:{js:["lib/corejs-typeahead/typeahead.bundle.min.js"],exists:function(){return n.jquery.exists()&&void 0!==jQuery.fn.typeahead}},csc:{css:["css/orghunter.csc.min.css"],exists:function(){return n.jquery.exists()&&n.chosen.exists()&&n.typeahead.exists()&&void 0!==jQuery.fn.orghunterCSC}}},M={apiURL:"",searchURL:"{apiURL}/charitysearch?eligible={eligible}&state={state}&city={city}&searchTerm={term}",searchAliasURL:"{apiURL}/charitysearchalias?eligible={eligible}&state={state}&city={city}&searchTerm={term}",citiesURL:"{apiURL}/cities/{state}",searchPlaceholder:"Search all {location} charities",searchAllCityPlaceholder:"Select a state to filter by city",searchStateCityPlaceholder:"All {state} cities",searchAlias:!1,searchEligible:!0,stateChosen:!0,resultsHeight:"auto",resultsLimit:5,submitButton:!1,onSubmit:null,apiData:{},size:"medium",width:"normal",onReady:null,onCharitySelect:null,cscPath:null},t={AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District of Columbia",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"},a={AS:"American Samoa",GU:"Guam",MP:"Northern Mariana Islands",PR:"Puerto Rico",VI:"U.S. Virgin Islands"},R={"":"- All States -"};for(var c in t)R[c]=t[c];for(var r in R["-"]="--------------------",a)R[r]=a[r];function o(e,t){if(!e.exists()){if(t="/"==(t=t||function(){if(h)return h;if(document.currentScript&&document.currentScript.src)return h=document.currentScript.src.replace(f,"");for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++)if(e[t].src.match(f))return h=e[t].src.replace(f,"");"undefined"!=typeof console&&void 0!==console.warn&&console.warn("Could not determine orghunter.csc.js path.")}()).slice(-1)?t:t+"/",void 0!==e.css)for(i in e.css)g(t+e.css[i]);if(void 0!==e.js)for(i in e.js)y(t+e.js[i])}}function I(){return"ohcsc-"+(""+Math.random()).replace(/\D/g,"")}function u(a){var c=jQuery;function r(e,i){return e.replace(/{([a-zA-Z0-9]+)}/g,function(e,t){return i[t]||""})}a=c.extend({},M,a);var e=I(),t=I(),i=I(),n=I(),o=I(),u=I(),d=I(),l=c.extend({},a.apiData),h=a.searchAlias?a.searchAliasURL:a.searchURL,f={},g=a.searchEligible?"1":"0",y="",p="",m="",b=!1;searchStateName=function(){if(y)return R[y]};var v=this,C=c('<select id="ohcsc-state" class="ohcsc-state ohcsc-s ohcsc-f"></select>'),w=c('<input id="ohcsc-city" type="text" class="ohcsc-city ohcsc-tf ohcsc-f"/>'),S=c('<input id="ohcsc-term" type="text" class="ohcsc-term ohcsc-tf ohcsc-f"/>'),j=c('<button id="ohcsc-submit" class="ohcsc-submit">'+a.submitButton+"</button>"),x=c('<div id="ohcsc-w" class="ohcsc-w ohcsc-w-'+{small:"sm",medium:"md",large:"lg"}[a.size]+" ohcsc-w-width-"+a.width+'"></div>').appendTo(v),N=c('<div id="ohcsc-state-w" class="ohcsc-f-w"></div>').append(C),A=c('<div id="ohcsc-city-w" class="ohcsc-f-w"></div>').append(w),k=c('<div id="ohcsc-term-w" class="ohcsc-f-w"></div>').append(S),T=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:r(h,{}),prepare:function(e,t){var i={eligible:g,state:y,city:p,term:encodeURIComponent(e)},n=c.extend({},a,i);return t.url=r(h,n),t.data=l,t},transform:function(e){return e.data}}});return v.bind(e,function(){C.trigger(n),w.trigger(n),S.trigger(n),j.trigger(n),v.trigger(i)}).bind(t,function(){C.trigger(o),w.trigger(o),S.trigger(o)}).bind("ohcsc-refresh "+i,function(){C.trigger(u),w.trigger(u),S.trigger(u),j.trigger(u)}).bind("ohcsc-reset",function(e,t){t.keepState||C.trigger(o),t.keepCity||w.trigger(o),t.keepTerm||S.trigger(o)}),C.bind(n,function(){x.append(N),c.each(R,function(e,t){C.append('<option value="'+e+'">'+t+"</option>")}),a.defaultState&&R[a.defaultState]&&C.trigger(d,[a.defaultState]),a.stateChosen&&C.chosen(),C.trigger("change")}).bind(u,function(){a.stateChosen&&(C.chosen("destroy"),C.chosen())}).bind(d,function(e,t){C.val(t).trigger("change")}).bind(u,function(){N.removeClass("selected"),y&&N.addClass("selected")}).bind("change",function(){y=C.val()}).bind("change",function(){y&&window.setTimeout(function(){w.trigger("focus")},10)}).bind("change",function(){v.trigger(t),v.trigger(i)}).bind("change",function(){"-"==C.val()&&C.trigger(d,[""])}),w.bind("keyup change",function(){p=w.val(),v.trigger(i)}).bind("change",function(){p&&S.trigger("focus")}).bind(n,function(){x.append(A),a.defaultCity&&w.trigger(d,[a.defaultCity])}).bind(o,function(){w.typeahead("val","").val("").trigger("change")}).bind(d,function(e,t){w.val(t).trigger("change")}).bind(u,function(){A.removeClass("selected"),p&&A.addClass("selected")}).bind(u,function(){y?w.removeAttr("disabled"):w.attr("disabled","disabled")}).bind(u,function(){var e=a.searchAllCityPlaceholder,t={};y&&(t.state=searchStateName(),e=r(a.searchStateCityPlaceholder,t)),w.attr("placeholder",e)}).bind(u,function(){y&&void 0===f[y]&&(w.typeahead("destroy"),function(t,i){if(void 0===f[t]){var e=c.extend({},a,{state:t}),n=r(a.citiesURL,e);c.getJSON(n,l,function(e){f[t]=new Bloodhound({datumTokenizer:function(e){return[e]},queryTokenizer:function(e){return[e]},local:e}),i()})}else i()}(y,function(e){var t=w.is(":focus");v.trigger(i),t&&w.trigger("focus")}))}).bind(u,function(){y&&void 0!==f[y]?w.is(".tt-input")||w.typeahead({hint:!0},{name:"cities",source:f[y],limit:1}):w.typeahead("destroy")}).bind("typeahead:autocomplete typeahead:select",function(){w.trigger("change")}).bind("keydown",function(e){13==e.which&&w.trigger(c.Event("keydown",{which:39}))}),S.bind("keyup change",function(){m=S.val(),v.trigger(i)}).bind(n,function(){x.append(k),S.val("")}).bind(o,function(){S.typeahead("val","").val("").trigger("change")}).bind(u,function(){var e={location:"US"};y&&(e.location=searchStateName(),p&&(e.location=p+", "+y)),S.attr("placeholder",r(a.searchPlaceholder,e))}).bind(u,function(){"auto"==a.resultsHeight?k.removeClass("fixed-height"):k.addClass("fixed-height")}).typeahead({highlight:!0},{display:function(e){return e.charityName},templates:{suggestion:function(e){return s="<div><em>"+e.charityName+"</em><small>"+e.city+", "+e.state+"</small></div>",s}},source:T,limit:a.resultsLimit}).bind("typeahead:asyncrequest",function(){k.addClass("load")}).bind("typeahead:asynccancel typeahead:asyncreceive",function(){k.removeClass("load")}).bind("typeahead:select",function(e,t){var i=[t.ein,t];b=!0,"function"==typeof a.onCharitySelect&&a.onCharitySelect.apply(this,i)}).bind("typeahead:active",function(){a.submitButton&&k.children(".twitter-typeahead").length&&!j.parent(".twitter-typeahead").length&&j.appendTo(k.children(".twitter-typeahead"))}).bind("typeahead:active",function(){k.find(".tt-menu").css("height",a.resultsHeight)}),a.submitButton?(j.bind(n,function(){j.appendTo(k).hide()}).bind(u,function(){y||p||S.val()?j.show():j.hide()}).bind("click",function(){var e=[{state:y,city:p,term:m}];"function"==typeof a.onSubmit&&a.onSubmit.apply(this,e)}),S.bind("keydown",function(e){13!=e.which||b||j.trigger("click")})):x.addClass("has-load"),v.trigger(e),"function"==typeof a.onReady&&a.onReady(),this}function d(e){var t=this;m(e),p(function(){u.call(t,e)},function(){return n.chosen.exists()&&n.typeahead.exists()&&n.csc.exists()})}function l(){n.jquery.exists()&&!n.csc.exists()&&(jQuery.fn.orghunterCSC=d)}var h=null,f=/js\/orghunter\.csc(\.min)?\.js(.*)?/,g=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},y=function(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,document.getElementsByTagName("head")[0].appendChild(t)},p=function(e,t,i){i=void 0!==i?i:10,t()?e():i<3e4&&window.setTimeout(function(){p(e,t,2*i)},i)},m=function(e){var t=e&&e.cscPath?e.cscPath.replace(f,""):null;o(n.jquery,t),p(function(){o(n.chosen,t),o(n.typeahead,t),o(n.csc,t),p(function(){l()},function(){return n.chosen.exists()&&n.typeahead.exists()})},function(){return n.jquery.exists()})};e.orghunterCSC=function(e,t){m(t),p(function(){jQuery(e).orghunterCSC(t)},function(){return n.csc.exists()})},l()}(window);
//# sourceMappingURL=orghunter.csc.min.js.map
