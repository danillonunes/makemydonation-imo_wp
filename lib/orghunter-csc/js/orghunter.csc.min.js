!function(e){var n={jquery:{js:["lib/jquery/jquery.min.js"],exists:function(){return"undefined"!=typeof jQuery}},chosen:{css:["lib/chosen/chosen.min.css"],js:["lib/chosen/chosen.jquery.min.js"],exists:function(){return void 0!==jQuery.fn.chosen}},typeahead:{js:["lib/corejs-typeahead/typeahead.bundle.min.js"],exists:function(){return void 0!==jQuery.fn.typeahead}},csc:{css:["css/orghunter.csc.min.css"],exists:function(){return void 0!==jQuery.fn.orghunterCSC}}},x={apiURL:"",searchURL:"{apiURL}/charitysearch?eligible={eligible}&state={state}&city={city}&searchTerm={term}",searchAliasURL:"{apiURL}/charitysearchalias?eligible={eligible}&state={state}&city={city}&searchTerm={term}",citiesURL:"{apiURL}/cities/{state}",searchPlaceholder:"Search all {location} charities",searchAllCityPlaceholder:"Select a state to filter by city",searchStateCityPlaceholder:"All {state} cities",searchAlias:!1,searchEligible:!0,submitButton:!1,onSubmit:null,apiData:{},size:"medium",width:"normal",onReady:null,onCharitySelect:null},t={AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District of Columbia",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"},a={AS:"American Samoa",GU:"Guam",MP:"Northern Mariana Islands",PR:"Puerto Rico",VI:"U.S. Virgin Islands"},R={"":"- All States -"};for(var c in t)R[c]=t[c];for(var r in R["-"]="--------------------",a)R[r]=a[r];function o(){if(u)return u;for(var e=document.getElementsByTagName("script"),t=/js\/orghunter\.csc(\.min)?\.js(.*)?/,i=0;i<e.length;i++)if(e[i].src.match(t))return u=e[i].src.replace(t,"");"undefined"!=typeof console&&void 0!==console.warn&&console.warn("Could not determine orghunter.csc.js path.")}function d(e){if(!e.exists()){if(void 0!==e.css)for(i in e.css)l(o()+e.css[i]);if(void 0!==e.js)for(i in e.js)h(o()+e.js[i])}}function I(){return"ohcsc-"+(""+Math.random()).replace(/\D/g,"")}var u=null,l=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},h=function(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,document.getElementsByTagName("head")[0].appendChild(t)},g=function(e,t,i){i=void 0!==i?i:10,t()?e():i<3e4&&window.setTimeout(function(){g(e,t,2*i)},i)};jQueryFn=function(a){var c=jQuery;a=c.extend({},x,a);function r(e,i){return e.replace(/{([a-zA-Z0-9]+)}/g,function(e,t){return i[t]||""})}var e=I(),t=I(),i=I(),n=I(),o=I(),d=I(),u=I(),l=c.extend({},a.apiData),h=a.searchAlias?a.searchAliasURL:a.searchURL,g={},f=a.searchEligible?"1":"0",y="",p="",m="",b=!1;searchStateName=function(){if(y)return R[y]};var v=this,w=c('<select id="ohcsc-state" class="ohcsc-state ohcsc-s ohcsc-f"></select>'),C=c('<input id="ohcsc-city" type="text" class="ohcsc-city ohcsc-tf ohcsc-f"/>'),S=c('<input id="ohcsc-term" type="text" class="ohcsc-term ohcsc-tf ohcsc-f"/>'),j=c('<button id="ohcsc-submit" class="ohcsc-submit">'+a.submitButton+"</button>"),N=c('<div id="ohcsc-w" class="ohcsc-w ohcsc-w-'+{small:"sm",medium:"md",large:"lg"}[a.size]+" ohcsc-w-width-"+a.width+'"></div>').appendTo(v),A=c('<div id="ohcsc-state-w" class="ohcsc-f-w"></div>').append(w),k=c('<div id="ohcsc-city-w" class="ohcsc-f-w"></div>').append(C),T=c('<div id="ohcsc-term-w" class="ohcsc-f-w"></div>').append(S),M=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:r(h,{}),prepare:function(e,t){var i={eligible:f,state:y,city:p,term:encodeURIComponent(e)},n=c.extend({},a,i);return t.url=r(h,n),t.data=l,t},transform:function(e){return e.data}}});return v.bind(e,function(){w.trigger(n),C.trigger(n),S.trigger(n),j.trigger(n),v.trigger(i)}).bind(t,function(){w.trigger(o),C.trigger(o),S.trigger(o)}).bind("ohcsc-refresh "+i,function(){w.trigger(d),C.trigger(d),S.trigger(d),j.trigger(d)}).bind("ohcsc-reset",function(e,t){t.keepState||w.trigger(o),t.keepCity||C.trigger(o),t.keepTerm||S.trigger(o)}),w.bind(n,function(){N.append(A),c.each(R,function(e,t){w.append('<option value="'+e+'">'+t+"</option>")}),a.defaultState&&R[a.defaultState]&&w.trigger(u,[a.defaultState]),w.chosen(),w.trigger("change")}).bind(d,function(){w.chosen("destroy"),w.chosen()}).bind(u,function(e,t){w.val(t).trigger("change")}).bind(d,function(){A.removeClass("selected"),y&&A.addClass("selected")}).bind("change",function(){y=w.val()}).bind("change",function(){y&&window.setTimeout(function(){C.trigger("focus")},10)}).bind("change",function(){v.trigger(t),v.trigger(i)}).bind("change",function(){"-"==w.val()&&w.trigger(u,[""])}),C.bind("keyup change",function(){p=C.val(),v.trigger(i)}).bind("change",function(){p&&S.trigger("focus")}).bind(n,function(){N.append(k),a.defaultCity&&C.trigger(u,[a.defaultCity])}).bind(o,function(){C.typeahead("val","").val("").trigger("change")}).bind(u,function(e,t){C.val(t).trigger("change")}).bind(d,function(){k.removeClass("selected"),p&&k.addClass("selected")}).bind(d,function(){y?C.removeAttr("disabled"):C.attr("disabled","disabled")}).bind(d,function(){var e=a.searchAllCityPlaceholder,t={};y&&(t.state=searchStateName(),e=r(a.searchStateCityPlaceholder,t)),C.attr("placeholder",e)}).bind(d,function(){y&&void 0===g[y]&&(C.typeahead("destroy"),function(t,i){if(void 0===g[t]){var e=c.extend({},a,{state:t}),n=r(a.citiesURL,e);c.getJSON(n,l,function(e){g[t]=new Bloodhound({datumTokenizer:function(e){return[e]},queryTokenizer:function(e){return[e]},local:e}),i()})}else i()}(y,function(e){var t=C.is(":focus");v.trigger(i),t&&C.trigger("focus")}))}).bind(d,function(){y&&void 0!==g[y]?C.is(".tt-input")||C.typeahead({hint:!0},{name:"cities",source:g[y],limit:1}):C.typeahead("destroy")}).bind("typeahead:autocomplete typeahead:select",function(){C.trigger("change")}).bind("keydown",function(e){13==e.which&&C.trigger(c.Event("keydown",{which:39}))}),S.bind("keyup change",function(){m=S.val(),v.trigger(i)}).bind(n,function(){N.append(T),S.val("")}).bind(o,function(){S.typeahead("val","").val("").trigger("change")}).bind(d,function(){var e={location:"US"};y&&(e.location=searchStateName(),p&&(e.location=p+", "+y)),S.attr("placeholder",r(a.searchPlaceholder,e))}).typeahead({highlight:!0},{display:function(e){return e.charityName},templates:{suggestion:function(e){return s="<div><em>"+e.charityName+"</em><small>"+e.city+", "+e.state+"</small></div>",s}},source:M}).bind("typeahead:asyncrequest",function(){T.addClass("load")}).bind("typeahead:asynccancel typeahead:asyncreceive",function(){T.removeClass("load")}).bind("typeahead:select",function(e,t){var i=[t.ein,t];b=!0,"function"==typeof a.onCharitySelect&&a.onCharitySelect.apply(this,i)}).bind("typeahead:active",function(){a.submitButton&&T.children(".twitter-typeahead").length&&!j.parent(".twitter-typeahead").length&&j.appendTo(T.children(".twitter-typeahead"))}),a.submitButton?(j.bind(n,function(){j.appendTo(T).hide()}).bind(d,function(){y||p||S.val()?j.show():j.hide()}).bind("click",function(){var e=[{state:y,city:p,term:m}];"function"==typeof a.onSubmit&&a.onSubmit.apply(this,e)}),S.bind("keydown",function(e){13!=e.which||b||j.trigger("click")})):N.addClass("has-load"),v.trigger(e),"function"==typeof a.onReady&&a.onReady(),this},e.orghunterCSC=function(e,t){g(function(){jQuery(e).orghunterCSC(t)},function(){return n.jquery.exists()&&n.csc.exists()})};d(n.jquery),g(function(){d(n.chosen),d(n.typeahead),d(n.csc),g(function(){jQuery.fn.orghunterCSC=jQueryFn},function(){return n.jquery.exists()&&n.chosen.exists()&&n.typeahead.exists()})},function(){return n.jquery.exists()})}(window);
//# sourceMappingURL=orghunter.csc.min.js.map
